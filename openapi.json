{"openapi":"3.1.0","info":{"title":"Zordrax Onboarding Agent","version":"0.1.0"},"paths":{"/health":{"get":{"tags":["health"],"summary":"Health","operationId":"health_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/connections/test":{"post":{"tags":["connections"],"summary":"Test Connection","description":"MVP stub.\n\nToday: returns a deterministic snapshot without attempting a real network connection.\nNext: implement real connectivity + metadata introspection per connector.","operationId":"test_connection_connections_test_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConnectionTestIn"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConnectionTestOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/connectors":{"get":{"tags":["connectors"],"summary":"List Connectors","operationId":"list_connectors_api_connectors_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/ConnectorOut"},"type":"array","title":"Response List Connectors Api Connectors Get"}}}}}},"post":{"tags":["connectors"],"summary":"Create Connector","operationId":"create_connector_api_connectors_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConnectorIn"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConnectorOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/connectors/{connector_id}":{"get":{"tags":["connectors"],"summary":"Get Connector","operationId":"get_connector_api_connectors__connector_id__get","parameters":[{"name":"connector_id","in":"path","required":true,"schema":{"type":"string","title":"Connector Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConnectorOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/connectors/{connector_id}/test":{"post":{"tags":["connectors"],"summary":"Test Connector","operationId":"test_connector_api_connectors__connector_id__test_post","parameters":[{"name":"connector_id","in":"path","required":true,"schema":{"type":"string","title":"Connector Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Test Connector Api Connectors  Connector Id  Test Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/connectors/{connector_id}/discover":{"post":{"tags":["connectors"],"summary":"Discover Connector","operationId":"discover_connector_api_connectors__connector_id__discover_post","parameters":[{"name":"connector_id","in":"path","required":true,"schema":{"type":"string","title":"Connector Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Discover Connector Api Connectors  Connector Id  Discover Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/runs/":{"post":{"tags":["runs"],"summary":"Create a run","operationId":"create_run_endpoint_runs__post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateRunRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["runs"],"summary":"List runs","operationId":"list_runs_endpoint_runs__get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/runs/{run_id}":{"get":{"tags":["runs"],"summary":"Get run","operationId":"get_run_endpoint_runs__run_id__get","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/runs/{run_id}/events":{"get":{"tags":["runs"],"summary":"List Events","operationId":"list_events_runs__run_id__events_get","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}},{"name":"after_id","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"After Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["runs"],"summary":"Append Event","operationId":"append_event_runs__run_id__events_post","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}},{"name":"X-Idempotency-Key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Idempotency-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RunEventIn"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/runs/{run_id}/cancel":{"post":{"tags":["runs"],"summary":"Cancel Run","operationId":"cancel_run_runs__run_id__cancel_post","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/connectors/types":{"get":{"tags":["connectors"],"summary":"Connector Types","operationId":"connector_types_api_connectors_types_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/connectors/validate":{"post":{"tags":["connectors"],"summary":"Validate Connection","operationId":"validate_connection_api_connectors_validate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConnectorRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/connectors/tables":{"post":{"tags":["connectors"],"summary":"List Tables","operationId":"list_tables_api_connectors_tables_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TablesRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/connectors/tables/profile":{"post":{"tags":["connectors"],"summary":"Profile Table","operationId":"profile_table_api_connectors_tables_profile_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProfileRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/connectors/tables/sample":{"post":{"tags":["connectors"],"summary":"Sample Table","operationId":"sample_table_api_connectors_tables_sample_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SampleRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/deploy/_debug/build":{"get":{"tags":["deploy"],"summary":"Deploy Debug Build","operationId":"deploy_debug_build_api_deploy__debug_build_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Deploy Debug Build Api Deploy  Debug Build Get"}}}}}}},"/api/deploy/plan":{"post":{"tags":["deploy"],"summary":"Deploy Plan","description":"Plan:\n- Read BRD lifecycle requirement_sets.id\n- Read onboarding_constraints.requirement_set_id\n- Sync into canonical_requirement_sets so Packages/DeployRun can FK correctly\n- Guardrails evaluation on canonical row (now populated)","operationId":"deploy_plan_api_deploy_plan_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeployPlanReq"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Deploy Plan Api Deploy Plan Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/deploy/_debug/req/{requirement_set_id}":{"get":{"tags":["deploy"],"summary":"Deploy Debug Req","description":"Debug helper: shows how constraints/context are loaded for deploy_plan.","operationId":"deploy_debug_req_api_deploy__debug_req__requirement_set_id__get","parameters":[{"name":"requirement_set_id","in":"path","required":true,"schema":{"type":"string","title":"Requirement Set Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Deploy Debug Req Api Deploy  Debug Req  Requirement Set Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/deploy/{run_id}/approve":{"post":{"tags":["deploy"],"summary":"Deploy Approve","operationId":"deploy_approve_api_deploy__run_id__approve_post","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Deploy Approve Api Deploy  Run Id  Approve Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/deploy/{run_id}/apply":{"post":{"tags":["deploy"],"summary":"Deploy Apply","operationId":"deploy_apply_api_deploy__run_id__apply_post","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Deploy Apply Api Deploy  Run Id  Apply Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/deploy/{run_id}/package":{"get":{"tags":["deploy"],"summary":"Deploy Package View","operationId":"deploy_package_view_api_deploy__run_id__package_get","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Deploy Package View Api Deploy  Run Id  Package Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/deploy/{run_id}/outputs":{"get":{"tags":["deploy"],"summary":"Deploy Outputs","description":"Lightweight endpoint to surface Terraform/infra outputs (stub if none).","operationId":"deploy_outputs_api_deploy__run_id__outputs_get","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Deploy Outputs Api Deploy  Run Id  Outputs Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/deploy/{run_id}/refresh":{"get":{"tags":["deploy"],"summary":"Deploy Refresh","operationId":"deploy_refresh_api_deploy__run_id__refresh_get","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Deploy Refresh Api Deploy  Run Id  Refresh Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/brd/_debug/build":{"get":{"tags":["brd"],"summary":"Brd Debug Build","operationId":"brd_debug_build_api_brd__debug_build_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/brd/sessions":{"post":{"tags":["brd-lifecycle"],"summary":"Create Session","description":"Creates a BRD session. Uses UUID (hyphenated) because your DB screenshot shows session_id like that.","operationId":"create_session_api_brd_sessions_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ai_agent__routes__requirement_sets_lifecycle__CreateSessionIn"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Create Session Api Brd Sessions Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/brd/requirement-sets":{"post":{"tags":["brd-lifecycle"],"summary":"Create Requirement Set","description":"Creates a RequirementSet in DRAFT state.","operationId":"create_requirement_set_api_brd_requirement_sets_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateReqSetIn"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Create Requirement Set Api Brd Requirement Sets Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/brd/requirement-sets/{requirement_set_id}":{"get":{"tags":["brd"],"summary":"Read Requirement Set","operationId":"read_requirement_set_api_brd_requirement_sets__requirement_set_id__get","parameters":[{"name":"requirement_set_id","in":"path","required":true,"schema":{"type":"string","title":"Requirement Set Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequirementSetOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/brd/requirement-sets/{requirement_set_id}/inputs":{"get":{"tags":["brd"],"summary":"Read Requirement Set Inputs","operationId":"read_requirement_set_inputs_api_brd_requirement_sets__requirement_set_id__inputs_get","parameters":[{"name":"requirement_set_id","in":"path","required":true,"schema":{"type":"string","title":"Requirement Set Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Read Requirement Set Inputs Api Brd Requirement Sets  Requirement Set Id  Inputs Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/brd/requirement-sets/{requirement_set_id}/business-context":{"put":{"tags":["brd"],"summary":"Upsert Business Context","operationId":"upsert_business_context_api_brd_requirement_sets__requirement_set_id__business_context_put","parameters":[{"name":"requirement_set_id","in":"path","required":true,"schema":{"type":"string","title":"Requirement Set Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BusinessContextIn"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/brd/requirement-sets/{requirement_set_id}/functional-requirements":{"put":{"tags":["brd"],"summary":"Upsert Functional Requirements","operationId":"upsert_functional_requirements_api_brd_requirement_sets__requirement_set_id__functional_requirements_put","parameters":[{"name":"requirement_set_id","in":"path","required":true,"schema":{"type":"string","title":"Requirement Set Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FunctionalRequirementsUpsert"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/brd/requirement-sets/{requirement_set_id}/constraints":{"put":{"tags":["brd"],"summary":"Upsert Constraints","operationId":"upsert_constraints_api_brd_requirement_sets__requirement_set_id__constraints_put","parameters":[{"name":"requirement_set_id","in":"path","required":true,"schema":{"type":"string","title":"Requirement Set Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConstraintsIn"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/brd/constraints/{requirement_set_id}":{"put":{"tags":["brd"],"summary":"Alias Constraints","operationId":"alias_constraints_api_brd_constraints__requirement_set_id__put","parameters":[{"name":"requirement_set_id","in":"path","required":true,"schema":{"type":"string","title":"Requirement Set Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConstraintsIn"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/brd/requirement-sets/{requirement_set_id}/connector":{"put":{"tags":["brd"],"summary":"Attach Connector","operationId":"attach_connector_api_brd_requirement_sets__requirement_set_id__connector_put","parameters":[{"name":"requirement_set_id","in":"path","required":true,"schema":{"type":"string","title":"Requirement Set Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConnectorAttachIn"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["brd"],"summary":"Attach Connector Post","operationId":"attach_connector_post_api_brd_requirement_sets__requirement_set_id__connector_post","parameters":[{"name":"requirement_set_id","in":"path","required":true,"schema":{"type":"string","title":"Requirement Set Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConnectorAttachIn"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["brd"],"summary":"Get Attached Connector","operationId":"get_attached_connector_api_brd_requirement_sets__requirement_set_id__connector_get","parameters":[{"name":"requirement_set_id","in":"path","required":true,"schema":{"type":"string","title":"Requirement Set Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/brd/guardrails/{requirement_set_id}":{"put":{"tags":["brd"],"summary":"Upsert Guardrails","operationId":"upsert_guardrails_api_brd_guardrails__requirement_set_id__put","parameters":[{"name":"requirement_set_id","in":"path","required":true,"schema":{"type":"string","title":"Requirement Set Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GuardrailsIn"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/brd/requirement-sets/{requirement_set_id}/submit":{"post":{"tags":["brd-lifecycle"],"summary":"Submit Requirement Set","description":"draft -> submitted","operationId":"submit_requirement_set_api_brd_requirement_sets__requirement_set_id__submit_post","parameters":[{"name":"requirement_set_id","in":"path","required":true,"schema":{"type":"string","title":"Requirement Set Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActorIn"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Submit Requirement Set Api Brd Requirement Sets  Requirement Set Id  Submit Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/brd/requirement-sets/{requirement_set_id}/approve":{"post":{"tags":["brd-lifecycle"],"summary":"Approve Requirement Set","description":"submitted -> approved","operationId":"approve_requirement_set_api_brd_requirement_sets__requirement_set_id__approve_post","parameters":[{"name":"requirement_set_id","in":"path","required":true,"schema":{"type":"string","title":"Requirement Set Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActorIn"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Approve Requirement Set Api Brd Requirement Sets  Requirement Set Id  Approve Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/brd/requirement-sets/{requirement_set_id}/reject":{"post":{"tags":["brd"],"summary":"Reject Requirement Set","operationId":"reject_requirement_set_api_brd_requirement_sets__requirement_set_id__reject_post","parameters":[{"name":"requirement_set_id","in":"path","required":true,"schema":{"type":"string","title":"Requirement Set Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActionBody"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActionResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/infra/callback":{"post":{"tags":["infra-callback"],"summary":"Infra Callback","operationId":"infra_callback_api_infra_callback_post","parameters":[{"name":"x-infra-callback-secret","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Infra-Callback-Secret"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InfraCallbackPayload"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/infra/outputs/{run_id}":{"get":{"tags":["infra-callback"],"summary":"Get Infra Outputs","operationId":"get_infra_outputs_api_infra_outputs__run_id__get","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/guardrails/evaluate":{"post":{"tags":["guardrails"],"summary":"Evaluate Guardrails","operationId":"evaluate_guardrails_guardrails_evaluate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IntakeSpec"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GuardrailsEvaluation"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/debug/healthz":{"get":{"tags":["debug"],"summary":"Healthz","operationId":"healthz_api_debug_healthz_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/debug/db":{"get":{"tags":["debug"],"summary":"Db Identity","description":"Safe DB identity + server info.\nDoes NOT return DATABASE_URL or secrets.","operationId":"db_identity_api_debug_db_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/recommendations/top3":{"get":{"tags":["recommendations"],"summary":"Top3","operationId":"top3_api_recommendations_top3_get","parameters":[{"name":"requirement_set_id","in":"query","required":true,"schema":{"type":"string","minLength":8,"title":"Requirement Set Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Top3Response"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/recommendations/select":{"post":{"tags":["recommendations"],"summary":"Select","operationId":"select_api_recommendations_select_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SelectIn"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Select Api Recommendations Select Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"ActionBody":{"properties":{"actor":{"type":"string","title":"Actor","default":"unknown"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason"}},"type":"object","title":"ActionBody"},"ActionResult":{"properties":{"ok":{"type":"boolean","title":"Ok","default":true},"status":{"type":"string","title":"Status"},"requirement_set":{"$ref":"#/components/schemas/RequirementSetOut"}},"type":"object","required":["status","requirement_set"],"title":"ActionResult"},"ActorIn":{"properties":{"actor":{"type":"string","title":"Actor","default":"unknown"}},"type":"object","title":"ActorIn"},"BehaviorSpec":{"properties":{"allowed_regions":{"items":{"type":"string"},"type":"array","title":"Allowed Regions"},"allowed_environments":{"items":{"type":"string"},"type":"array","title":"Allowed Environments"},"require_private_networking":{"type":"boolean","title":"Require Private Networking","default":false},"budget_eur_month_max":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Budget Eur Month Max"}},"type":"object","title":"BehaviorSpec"},"BusinessContextIn":{"properties":{"industry":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Industry"},"business_owner":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Business Owner"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"stakeholders":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Stakeholders"},"pii_present":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Pii Present"},"gdpr_required":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Gdpr Required"},"private_networking_required":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Private Networking Required"},"budget_eur_month":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Budget Eur Month"}},"type":"object","title":"BusinessContextIn"},"ConnectionTestIn":{"properties":{"source_type":{"type":"string","title":"Source Type","examples":["postgres","mssql","mysql","oracle","snowflake","bigquery","s3"]},"host":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Host","examples":["mydb.company.com"]},"port":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Port","examples":[5432]},"database":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Database","examples":["sales"]},"username":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Username","examples":["readonly_user"]},"password":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Password","description":"Not stored. Only used for live tests when implemented."},"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Schema","examples":["public"]},"estimated_tables":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Estimated Tables"},"estimated_largest_table_rows":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Estimated Largest Table Rows"},"freshness":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Freshness","examples":["hourly","daily","weekly"]},"compliance_flags":{"additionalProperties":{"type":"boolean"},"type":"object","title":"Compliance Flags"}},"type":"object","required":["source_type"],"title":"ConnectionTestIn","description":"Phase B: Connect Data (MVP)\n\nThis is intentionally minimal and safe-by-default:\n- We DO NOT persist secrets.\n- We return a connection_snapshot that the frontend can store against a requirement_set."},"ConnectionTestOut":{"properties":{"ok":{"type":"boolean","title":"Ok"},"tested_at":{"type":"string","title":"Tested At"},"warnings":{"items":{"type":"string"},"type":"array","title":"Warnings","default":[]},"connection_snapshot":{"additionalProperties":true,"type":"object","title":"Connection Snapshot"}},"type":"object","required":["ok","tested_at","connection_snapshot"],"title":"ConnectionTestOut"},"ConnectorAttachIn":{"properties":{"connector_id":{"type":"string","title":"Connector Id"}},"type":"object","required":["connector_id"],"title":"ConnectorAttachIn"},"ConnectorIn":{"properties":{"type":{"type":"string","title":"Type"},"name":{"type":"string","title":"Name"},"sheet_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sheet Url"},"config":{"additionalProperties":true,"type":"object","title":"Config"},"org_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Org Id"}},"type":"object","required":["type","name"],"title":"ConnectorIn"},"ConnectorOut":{"properties":{"id":{"type":"string","title":"Id"},"org_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Org Id"},"type":{"type":"string","title":"Type"},"name":{"type":"string","title":"Name"},"config":{"additionalProperties":true,"type":"object","title":"Config"},"status":{"type":"string","title":"Status"},"last_tested_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Tested At"},"last_error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Error"},"discovered_schema_json":{"additionalProperties":true,"type":"object","title":"Discovered Schema Json"},"created_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created At"},"updated_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Updated At"}},"type":"object","required":["id","type","name","status"],"title":"ConnectorOut"},"ConnectorRequest":{"properties":{"type":{"$ref":"#/components/schemas/ConnectorType"},"config":{"additionalProperties":true,"type":"object","title":"Config"}},"type":"object","required":["type"],"title":"ConnectorRequest"},"ConnectorType":{"type":"string","enum":["mock","postgres","azure_sql","snowflake","oracle"],"title":"ConnectorType"},"ConstraintsIn":{"properties":{"region":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Region"},"environment":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Environment"},"cloud":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cloud"},"selected_tables":{"anyOf":[{"items":{"$ref":"#/components/schemas/SelectedTable"},"type":"array"},{"type":"null"}],"title":"Selected Tables"},"profiling_summary":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Profiling Summary"},"data_checks":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Data Checks"},"kpi_intent":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"title":"Kpi Intent"},"preferences":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Preferences"},"org_profile":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Org Profile"},"ops_constraints":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Ops Constraints"}},"type":"object","title":"ConstraintsIn"},"CreateReqSetIn":{"properties":{"session_id":{"type":"string","title":"Session Id"},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"}},"type":"object","required":["session_id"],"title":"CreateReqSetIn"},"CreateRequirementSet":{"properties":{"session_id":{"type":"string","title":"Session Id"},"title":{"type":"string","title":"Title","default":"Requirement Set"},"created_by":{"type":"string","title":"Created By","default":"unknown"}},"type":"object","required":["session_id"],"title":"CreateRequirementSet"},"CreateRunRequest":{"properties":{"mode":{"type":"string","title":"Mode","default":"manual"},"title":{"type":"string","title":"Title","default":"Manual Run"}},"type":"object","title":"CreateRunRequest"},"CreateSessionIn":{"properties":{"created_by":{"type":"string","title":"Created By","default":"unknown"},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"}},"type":"object","title":"CreateSessionIn"},"DeployPlanReq":{"properties":{"requirement_set_id":{"type":"string","minLength":8,"title":"Requirement Set Id"},"name_prefix":{"type":"string","title":"Name Prefix"},"region":{"type":"string","title":"Region"},"environment":{"type":"string","title":"Environment"},"enable_apim":{"type":"boolean","title":"Enable Apim","default":false},"backend_app_hostname":{"type":"string","title":"Backend App Hostname","default":"example.azurewebsites.net"},"recommendation_option_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Recommendation Option Id"},"recommendation_run_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Recommendation Run Id"},"recommendation_rank":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Recommendation Rank"}},"type":"object","required":["requirement_set_id","name_prefix","region","environment"],"title":"DeployPlanReq"},"FunctionalRequirementIn":{"properties":{"req_key":{"type":"string","minLength":3,"title":"Req Key"},"title":{"type":"string","minLength":3,"title":"Title"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"priority":{"type":"string","title":"Priority","default":"must"},"acceptance_criteria":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Acceptance Criteria"}},"type":"object","required":["req_key","title"],"title":"FunctionalRequirementIn"},"FunctionalRequirementsUpsert":{"properties":{"requirement_set_id":{"type":"string","title":"Requirement Set Id"},"items":{"items":{"$ref":"#/components/schemas/FunctionalRequirementIn"},"type":"array","title":"Items"}},"type":"object","required":["requirement_set_id","items"],"title":"FunctionalRequirementsUpsert"},"GuardrailsEvaluation":{"properties":{"intake_spec":{"$ref":"#/components/schemas/IntakeSpec"},"behavior_spec":{"$ref":"#/components/schemas/BehaviorSpec"},"result":{"$ref":"#/components/schemas/GuardrailsResult"}},"type":"object","required":["intake_spec","behavior_spec","result"],"title":"GuardrailsEvaluation"},"GuardrailsIn":{"properties":{"pii_present":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Pii Present"},"gdpr_required":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Gdpr Required"},"private_networking_required":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Private Networking Required"},"budget_eur_month":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Budget Eur Month"}},"type":"object","title":"GuardrailsIn"},"GuardrailsResult":{"properties":{"passed":{"type":"boolean","title":"Passed"},"reasons":{"items":{"type":"string"},"type":"array","title":"Reasons"},"suggestions":{"items":{"type":"string"},"type":"array","title":"Suggestions"}},"type":"object","required":["passed"],"title":"GuardrailsResult"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"InfraCallbackPayload":{"properties":{"run_id":{"type":"string","title":"Run Id","description":"SSOT run_id"},"provider":{"type":"string","title":"Provider","default":"azure_devops"},"pipeline_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pipeline Id"},"pipeline_run_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pipeline Run Id"},"pipeline_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pipeline Status"},"subscription_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subscription Id"},"tenant_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Id"},"resource_group":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Resource Group"},"location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location"},"status":{"type":"string","title":"Status","description":"received|succeeded|failed"},"outputs":{"additionalProperties":true,"type":"object","title":"Outputs"},"raw_payload":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Raw Payload"}},"type":"object","required":["run_id","status"],"title":"InfraCallbackPayload"},"IntakeSpec":{"properties":{"cloud":{"type":"string","title":"Cloud","default":"azure"},"region":{"type":"string","title":"Region"},"environment":{"type":"string","title":"Environment","default":"dev"},"budget_eur_month":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Budget Eur Month"},"pii_present":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Pii Present"},"gdpr_required":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Gdpr Required"},"private_networking_required":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Private Networking Required"},"sources":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"title":"Sources"}},"type":"object","required":["region"],"title":"IntakeSpec"},"ProfileRequest":{"properties":{"type":{"$ref":"#/components/schemas/ConnectorType"},"config":{"additionalProperties":true,"type":"object","title":"Config"},"table":{"$ref":"#/components/schemas/TableRef"}},"type":"object","required":["type","table"],"title":"ProfileRequest"},"RequirementSetOut":{"properties":{"id":{"type":"string","title":"Id"},"session_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"},"version":{"type":"integer","title":"Version"},"status":{"type":"string","title":"Status"},"title":{"type":"string","title":"Title"},"created_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created At"},"updated_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Updated At"}},"type":"object","required":["id","version","status","title"],"title":"RequirementSetOut"},"RunEventIn":{"properties":{"level":{"type":"string","pattern":"^(info|warning|error)$","title":"Level","default":"info"},"stage":{"type":"string","title":"Stage"},"status":{"type":"string","title":"Status"},"message":{"type":"string","title":"Message"}},"type":"object","required":["stage","status","message"],"title":"RunEventIn"},"SampleRequest":{"properties":{"type":{"$ref":"#/components/schemas/ConnectorType"},"config":{"additionalProperties":true,"type":"object","title":"Config"},"table":{"$ref":"#/components/schemas/TableRef"},"limit":{"type":"integer","title":"Limit","default":20}},"type":"object","required":["type","table"],"title":"SampleRequest"},"SelectIn":{"properties":{"requirement_set_id":{"type":"string","title":"Requirement Set Id"},"option_id":{"type":"string","title":"Option Id"}},"type":"object","required":["requirement_set_id","option_id"],"title":"SelectIn"},"SelectedTable":{"properties":{"schema":{"type":"string","title":"Schema"},"table":{"type":"string","title":"Table"}},"type":"object","required":["schema","table"],"title":"SelectedTable"},"SessionOut":{"properties":{"session_id":{"type":"string","title":"Session Id"},"created_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created By"},"persisted":{"type":"boolean","title":"Persisted","default":false}},"type":"object","required":["session_id"],"title":"SessionOut"},"TableRef":{"properties":{"schema":{"type":"string","title":"Schema"},"name":{"type":"string","title":"Name"}},"type":"object","required":["schema","name"],"title":"TableRef"},"TablesRequest":{"properties":{"type":{"$ref":"#/components/schemas/ConnectorType"},"config":{"additionalProperties":true,"type":"object","title":"Config"}},"type":"object","required":["type"],"title":"TablesRequest"},"Top3Option":{"properties":{"id":{"type":"string","title":"Id"},"rank":{"type":"integer","title":"Rank"},"title":{"type":"string","title":"Title"},"summary":{"type":"string","title":"Summary"},"terraform":{"$ref":"#/components/schemas/Top3Terraform"},"estimated_monthly_cost_eur":{"type":"number","title":"Estimated Monthly Cost Eur"},"risk_flags":{"items":{"type":"string"},"type":"array","title":"Risk Flags"},"rationale":{"additionalProperties":true,"type":"object","title":"Rationale"}},"type":"object","required":["id","rank","title","summary","terraform","estimated_monthly_cost_eur"],"title":"Top3Option"},"Top3Response":{"properties":{"requirement_set_id":{"type":"string","title":"Requirement Set Id"},"generated_at":{"type":"string","title":"Generated At"},"options":{"items":{"$ref":"#/components/schemas/Top3Option"},"type":"array","title":"Options"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata"}},"type":"object","required":["requirement_set_id","generated_at","options"],"title":"Top3Response"},"Top3Terraform":{"properties":{"cloud":{"type":"string","title":"Cloud"},"warehouse":{"type":"string","title":"Warehouse"},"etl":{"type":"string","title":"Etl"},"governance":{"type":"string","title":"Governance"},"enable_bi":{"type":"boolean","title":"Enable Bi"},"bi_tool":{"type":"string","title":"Bi Tool"},"enable_apim":{"type":"boolean","title":"Enable Apim"}},"type":"object","required":["cloud","warehouse","etl","governance","enable_bi","bi_tool","enable_apim"],"title":"Top3Terraform"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"ai_agent__routes__requirement_sets_lifecycle__CreateSessionIn":{"properties":{"actor":{"type":"string","title":"Actor","default":"unknown"},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"}},"type":"object","title":"CreateSessionIn"}}}}